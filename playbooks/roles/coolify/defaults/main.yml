---
# Predefined root username for first admin account
coolify_root_username: "admin"
# Predefined root user email for first admin account
coolify_root_user_email: "admin@localhost"
# Predefined root user password for first admin account
coolify_root_user_password: "admin@localhost"

# Custom Docker address pool base (CIDR notation)
coolify_docker_address_pool_base: "172.16.0.0/12"
# Custom Docker address pool size (must be 16-28)
coolify_docker_address_pool_size: 24
# Force override existing Docker pool configuration
coolify_docker_pool_force_override: false
# Enable/disable automatic Coolify updates
coolify_autoupdate: true
# Custom Docker registry URL for Coolify images
coolify_registry_url: "ghcr.io"

# Server registration settings
coolify_register_server: true
coolify_environment_group: "{{ (group_names | intersect(['production', 'development']) | first) | default('production') }}"
coolify_server: "{{ groups['server'] | default([]) | intersect(groups[coolify_environment_group] | default([])) }}"
coolify_server_name: "{{ coolify_server | first | default('') }}"
# Prefer private_ip if defined, otherwise fall back to ansible_host
coolify_server_ip: "{{ hostvars[coolify_server_name]['private_ip'] | default(hostvars[coolify_server_name]['ansible_host'], true) | default(coolify_server_name, true) if coolify_server_name else '' }}"
# coolify_private_key_path should be defined in inventory if not using default
coolify_private_key_path: ""
coolify_key_name: "{{ inventory_hostname }}"

# BETA/EXPERIMENTAL: Automatic API setup and node registration
coolify_auto_setup_enabled: true

# API settings
coolify_base_url: "http://{{ 'host.docker.internal' if (inventory_hostname in (groups['controller'] | default([])) or inventory_hostname == 'noc.host.uk.com') else (hostvars[groups['controller'] | first]['ansible_host'] if groups['controller'] | default([]) | length > 0 else ansible_host) }}:8000"
coolify_api_base_url: "{{ coolify_base_url }}/api/v1"

# State path (relative to inventory)
coolify_state_path: "{{ inventory_dir }}/../state"

# S3 Storage Settings (Unified)
s3_enabled: true
s3_endpoint: ""
s3_bucket: ""
s3_region: ""
s3_access_key: "{{ lookup('env', 'HETZNER_S3_ACCESS_KEY') | default('') }}"
s3_secret_key: "{{ lookup('env', 'HETZNER_S3_SECRET_KEY') | default('') }}"
s3_path: "state"
backup_encryption_key_path: "~/.ssh/hostuk"

# Hetzner Cloud/Robot Settings
hetzner_hcloud_token: "{{ lookup('env', 'HCLOUD_TOKEN') | default('') }}"
hetzner_robot_user: "{{ lookup('env', 'HETZNER_ROBOT_USER') | default('') }}"
hetzner_robot_password: "{{ lookup('env', 'HETZNER_ROBOT_PASSWORD') | default('') }}"
