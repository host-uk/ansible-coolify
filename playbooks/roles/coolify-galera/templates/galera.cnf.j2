# MariaDB Galera Configuration
# Generated by Ansible for {{ galera_node_name }}

[mysqld]
# Galera Provider Configuration
wsrep_on=ON
wsrep_provider=/usr/lib/galera/libgalera_smm.so
wsrep_cluster_name={{ galera_cluster_name }}
wsrep_cluster_address={{ galera_cluster_address }}
wsrep_node_name={{ galera_node_name }}
wsrep_node_address={{ galera_node_ip }}

# Galera Synchronization Configuration
wsrep_sst_method={{ galera_sst_method }}
wsrep_sst_auth={{ galera_sst_user }}:{{ galera_sst_password }}

# InnoDB Configuration for Galera
binlog_format=ROW
default_storage_engine=InnoDB
innodb_autoinc_lock_mode=2
innodb_flush_log_at_trx_commit=0
innodb_buffer_pool_size=256M

# Galera Replication Settings
wsrep_slave_threads=4
wsrep_log_conflicts=ON
wsrep_retry_autocommit=3

# Connection Settings
max_connections=500
max_allowed_packet=64M

# Logging
log_error=/var/log/mysql/error.log
slow_query_log=1
slow_query_log_file=/var/log/mysql/slow.log
long_query_time=2
